<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEM Quest - Offline Learning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    success: {
                        DEFAULT: "var(--success)",
                        foreground: "var(--success-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            },
            fontFamily: {
                sans: ['Inter', 'sans-serif'],
                heading: ['Poppins', 'sans-serif'],
            }
        },
    };
    </script>

    <style>
    :root {
        --radius: 0.75rem;
        
        /* Light theme colors */
        --background: hsl(45 25% 98%);
        --foreground: hsl(222 84% 15%);
        --card: hsl(0 0% 100%);
        --card-foreground: hsl(222 84% 15%);
        --primary: hsl(217 91% 60%);
        --primary-foreground: hsl(0 0% 98%);
        --secondary: hsl(142 76% 36%);
        --secondary-foreground: hsl(0 0% 98%);
        --muted: hsl(217 32% 96%);
        --muted-foreground: hsl(215 16% 47%);
        --accent: hsl(37 91% 55%);
        --accent-foreground: hsl(0 0% 98%);
        --success: hsl(142 76% 36%);
        --success-foreground: hsl(0 0% 98%);
        --destructive: hsl(0 84% 60%);
        --destructive-foreground: hsl(0 0% 98%);
        --border: hsl(214 32% 91%);
        --input: hsl(214 32% 91%);
        --ring: hsl(217 91% 60%);
    }

    .subject-math { --subject-color: hsl(266 75% 65%); }
    .subject-physics { --subject-color: hsl(217 91% 60%); }
    .subject-chemistry { --subject-color: hsl(142 76% 36%); }
    .subject-biology { --subject-color: hsl(37 91% 55%); }

    .quiz-option {
        transition: all 0.2s ease-in-out;
    }
    .quiz-option:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    .quiz-option.correct {
        background-color: hsl(142 76% 36%);
        color: white;
        border-color: hsl(142 76% 36%);
    }
    .quiz-option.incorrect {
        background-color: hsl(0 84% 60%);
        color: white;
        border-color: hsl(0 84% 60%);
    }

    .celebration {
        animation: celebration 0.6s ease-out;
    }
    
    @keyframes celebration {
        0% { transform: scale(0.8) rotate(-5deg); opacity: 0; }
        50% { transform: scale(1.1) rotate(2deg); opacity: 1; }
        100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    .slide-in {
        animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    .fade-in {
        animation: fadeIn 0.4s ease-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    </style>
</head>

<body class="bg-background font-sans text-foreground min-h-screen">
    <!-- @COMPONENT: HeaderComponent [title, language selector, points display] -->
    <header class="bg-card border-b border-border sticky top-0 z-50 shadow-sm">
        <div class="max-w-md mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center">
                        <i data-lucide="rocket" class="w-6 h-6 text-primary-foreground"></i>
                    </div>
                    <h1 class="text-xl font-heading font-bold text-foreground" data-bind="ui.title">STEM Quest</h1>
                </div>
                
                <div class="flex items-center space-x-3">
                    <!-- Points Display -->
                    <div class="flex items-center space-x-2 bg-accent/10 px-3 py-2 rounded-lg">
                        <i data-lucide="star" class="w-4 h-4 text-accent"></i>
                        <span class="font-semibold text-accent" data-bind="user.totalPoints">245</span>
                    </div>
                    
                    <!-- Language Selector -->
                    <select class="bg-muted border-border rounded-lg px-3 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-ring" data-event="change:switchLanguage">
                        <option value="en">EN</option>
                        <option value="hi">हिं</option>
                        <option value="te">తె</option>
                    </select>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: HeaderComponent -->

    <main class="max-w-md mx-auto px-4 pb-8">
        
        <!-- @COMPONENT: DashboardView [subjects grid, progress summary] -->
        <div id="dashboard-view" class="pt-6">
            <!-- Welcome Section -->
            <div class="mb-8 text-center">
                <h2 class="text-2xl font-heading font-bold text-foreground mb-2" data-bind="ui.welcomeMessage">Welcome back, Explorer! 🚀</h2>
                <p class="text-muted-foreground" data-bind="ui.welcomeSubtext">Continue your STEM journey and discover amazing concepts</p>
            </div>

            <!-- Progress Summary Card -->
            <div class="bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl p-6 mb-8 border border-border">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-heading font-semibold text-foreground" data-bind="ui.yourProgress">Your Progress</h3>
                    <div class="bg-success/20 px-3 py-1 rounded-full">
                        <span class="text-success font-semibold text-sm" data-bind="user.level">Level 3</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-3 gap-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-primary font-heading" data-bind="user.totalPoints">245</div>
                        <div class="text-xs text-muted-foreground" data-bind="ui.totalPoints">Total Points</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-secondary font-heading" data-bind="user.completedQuizzes">12</div>
                        <div class="text-xs text-muted-foreground" data-bind="ui.quizzesCompleted">Quizzes Done</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-accent font-heading" data-bind="user.streak">7</div>
                        <div class="text-xs text-muted-foreground" data-bind="ui.dayStreak">Day Streak</div>
                    </div>
                </div>
            </div>

            <!-- Subjects Grid -->
            <div class="space-y-4">
                <h3 class="text-lg font-heading font-semibold text-foreground mb-4" data-bind="ui.chooseSubject">Choose a Subject</h3>
                
                <!-- @MAP: subjects.map(subject => ( -->
                <div class="grid grid-cols-1 gap-4" data-mock="true">
                    <!-- Mathematics Card -->
                    <div class="bg-card rounded-2xl border border-border p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-[1.02] subject-math" data-event="click:selectSubject" data-subject-id="math">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center">
                                <i data-lucide="calculator" class="w-7 h-7 text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-muted-foreground" data-bind="ui.progress">Progress</div>
                                <div class="text-lg font-bold text-purple-600" data-bind="subject.progress">75%</div>
                            </div>
                        </div>
                        <h4 class="text-xl font-heading font-semibold text-foreground mb-2" data-bind="subject.name">Mathematics</h4>
                        <p class="text-muted-foreground text-sm mb-4" data-bind="subject.description">Algebra, Geometry, and Number Theory</p>
                        <div class="flex items-center space-x-2">
                            <div class="flex-1 bg-muted rounded-full h-2">
                                <div class="bg-purple-500 h-2 rounded-full w-3/4"></div>
                            </div>
                            <span class="text-sm text-muted-foreground" data-bind="subject.topicsCount">8 topics</span>
                        </div>
                    </div>

                    <!-- Physics Card -->
                    <div class="bg-card rounded-2xl border border-border p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-[1.02] subject-physics" data-event="click:selectSubject" data-subject-id="physics">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                                <i data-lucide="zap" class="w-7 h-7 text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-muted-foreground" data-bind="ui.progress">Progress</div>
                                <div class="text-lg font-bold text-blue-600" data-bind="subject.progress">45%</div>
                            </div>
                        </div>
                        <h4 class="text-xl font-heading font-semibold text-foreground mb-2" data-bind="subject.name">Physics</h4>
                        <p class="text-muted-foreground text-sm mb-4" data-bind="subject.description">Motion, Energy, and Forces</p>
                        <div class="flex items-center space-x-2">
                            <div class="flex-1 bg-muted rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full w-2/5"></div>
                            </div>
                            <span class="text-sm text-muted-foreground" data-bind="subject.topicsCount">6 topics</span>
                        </div>
                    </div>

                    <!-- Chemistry Card -->
                    <div class="bg-card rounded-2xl border border-border p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-[1.02] subject-chemistry" data-event="click:selectSubject" data-subject-id="chemistry">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center">
                                <i data-lucide="test-tube" class="w-7 h-7 text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-muted-foreground" data-bind="ui.progress">Progress</div>
                                <div class="text-lg font-bold text-green-600" data-bind="subject.progress">30%</div>
                            </div>
                        </div>
                        <h4 class="text-xl font-heading font-semibold text-foreground mb-2" data-bind="subject.name">Chemistry</h4>
                        <p class="text-muted-foreground text-sm mb-4" data-bind="subject.description">Elements, Compounds, and Reactions</p>
                        <div class="flex items-center space-x-2">
                            <div class="flex-1 bg-muted rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full w-1/3"></div>
                            </div>
                            <span class="text-sm text-muted-foreground" data-bind="subject.topicsCount">7 topics</span>
                        </div>
                    </div>

                    <!-- Biology Card -->
                    <div class="bg-card rounded-2xl border border-border p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-[1.02] subject-biology" data-event="click:selectSubject" data-subject-id="biology">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center">
                                <i data-lucide="leaf" class="w-7 h-7 text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-muted-foreground" data-bind="ui.progress">Progress</div>
                                <div class="text-lg font-bold text-orange-600" data-bind="subject.progress">60%</div>
                            </div>
                        </div>
                        <h4 class="text-xl font-heading font-semibold text-foreground mb-2" data-bind="subject.name">Biology</h4>
                        <p class="text-muted-foreground text-sm mb-4" data-bind="subject.description">Life Sciences and Ecosystems</p>
                        <div class="flex items-center space-x-2">
                            <div class="flex-1 bg-muted rounded-full h-2">
                                <div class="bg-orange-500 h-2 rounded-full w-3/5"></div>
                            </div>
                            <span class="text-sm text-muted-foreground" data-bind="subject.topicsCount">5 topics</span>
                        </div>
                    </div>
                </div>
                <!-- @END_MAP -->

                <!-- Achievement Banner -->
                <div class="bg-gradient-to-r from-accent/20 to-secondary/20 rounded-2xl p-6 mt-8 border border-border">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-accent rounded-xl flex items-center justify-center">
                            <i data-lucide="trophy" class="w-7 h-7 text-accent-foreground"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-heading font-semibold text-foreground" data-bind="ui.newAchievement">New Achievement!</h4>
                            <p class="text-muted-foreground text-sm" data-bind="achievement.description">Quiz Master - Complete 10 quizzes</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: DashboardView -->

        <!-- @COMPONENT: TopicsView [topic list for selected subject] -->
        <div id="topics-view" class="pt-6 hidden">
            <div class="flex items-center mb-6">
                <button class="mr-4 p-2 hover:bg-muted rounded-lg transition-colors" data-event="click:goBack">
                    <i data-lucide="arrow-left" class="w-5 h-5 text-foreground"></i>
                </button>
                <div>
                    <h2 class="text-xl font-heading font-bold text-foreground" data-bind="selectedSubject.name">Mathematics</h2>
                    <p class="text-muted-foreground text-sm" data-bind="selectedSubject.topicsCount">8 topics available</p>
                </div>
            </div>

            <!-- Topics List -->
            <!-- @MAP: selectedSubject.topics.map(topic => ( -->
            <div class="space-y-4" data-mock="true">
                <div class="bg-card rounded-2xl border border-border p-5 cursor-pointer hover:shadow-md transition-all duration-200" data-event="click:selectTopic" data-topic-id="algebra-basics">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-heading font-semibold text-foreground" data-bind="topic.name">Algebra Basics</h4>
                        <div class="flex items-center space-x-2">
                            <div class="bg-success/20 px-2 py-1 rounded-full">
                                <span class="text-success text-xs font-medium" data-bind="topic.status">Completed</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted-foreground text-sm mb-3" data-bind="topic.description">Learn basic algebraic operations and equations</p>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="help-circle" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="topic.questionCount">5 questions</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="clock" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="topic.duration">3 min</span>
                        </div>
                    </div>
                </div>

                <div class="bg-card rounded-2xl border border-border p-5 cursor-pointer hover:shadow-md transition-all duration-200" data-event="click:selectTopic" data-topic-id="geometry-basics">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-heading font-semibold text-foreground" data-bind="topic.name">Geometry Fundamentals</h4>
                        <div class="flex items-center space-x-2">
                            <div class="bg-primary/20 px-2 py-1 rounded-full">
                                <span class="text-primary text-xs font-medium" data-bind="topic.status">In Progress</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted-foreground text-sm mb-3" data-bind="topic.description">Shapes, angles, and geometric calculations</p>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="help-circle" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="topic.questionCount">7 questions</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="clock" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="topic.duration">5 min</span>
                        </div>
                    </div>
                </div>

                <div class="bg-card rounded-2xl border border-border p-5 cursor-pointer hover:shadow-md transition-all duration-200" data-event="click:selectTopic" data-topic-id="trigonometry">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-heading font-semibold text-foreground" data-bind="topic.name">Trigonometry</h4>
                        <div class="flex items-center space-x-2">
                            <div class="bg-muted px-2 py-1 rounded-full">
                                <span class="text-muted-foreground text-xs font-medium" data-bind="topic.status">Locked</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-muted-foreground text-sm mb-3" data-bind="topic.description">Sine, cosine, and tangent functions</p>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="help-circle" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="topic.questionCount">6 questions</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="lock" class="w-4 h-4 text-muted-foreground"></i>
                            <span class="text-sm text-muted-foreground" data-bind="ui.requiresCompletion">Requires completion of Geometry</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_MAP -->
        </div>
        <!-- @END_COMPONENT: TopicsView -->

        <!-- @COMPONENT: QuizView [quiz interface, questions, options] -->
        <div id="quiz-view" class="pt-6 hidden">
            <!-- Quiz Header -->
            <div class="flex items-center mb-6">
                <button class="mr-4 p-2 hover:bg-muted rounded-lg transition-colors" data-event="click:goBack">
                    <i data-lucide="arrow-left" class="w-5 h-5 text-foreground"></i>
                </button>
                <div class="flex-1">
                    <h2 class="text-lg font-heading font-bold text-foreground" data-bind="currentTopic.name">Algebra Basics</h2>
                    <div class="flex items-center space-x-4 mt-1">
                        <span class="text-sm text-muted-foreground" data-bind="quiz.progress">Question 2 of 5</span>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="star" class="w-4 h-4 text-accent"></i>
                            <span class="text-sm font-medium text-accent" data-bind="quiz.currentPoints">20 pts</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="bg-muted rounded-full h-2 mb-8">
                <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 40%" data-bind="quiz.progressPercentage"></div>
            </div>

            <!-- Quiz Question Card -->
            <div class="bg-card rounded-2xl border border-border p-6 mb-6">
                <div class="mb-6">
                    <h3 class="text-lg font-heading font-semibold text-foreground mb-4" data-bind="currentQuestion.text">What is the result of 2 + 2 × 2?</h3>
                    
                    <!-- Question Image (if applicable) -->
                    <!-- <img src="https://images.unsplash.com/photo-1509228627152-72ae9ae6848d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300" alt="Mathematical equation visualization" class="rounded-xl w-full h-48 object-cover mb-4" data-mock-image="true" data-implementation="Optional question illustrations" /> -->
                </div>

                <!-- Answer Options -->
                <!-- @MAP: currentQuestion.options.map((option, index) => ( -->
                <div class="space-y-3" data-mock="true">
                    <button class="quiz-option w-full bg-card border-2 border-border rounded-xl p-4 text-left hover:border-primary transition-all duration-200" data-event="click:selectAnswer" data-answer-index="0">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 rounded-full bg-muted flex items-center justify-center">
                                <span class="font-medium text-muted-foreground">A</span>
                            </div>
                            <span class="font-medium text-foreground" data-bind="option.text">6</span>
                        </div>
                    </button>

                    <button class="quiz-option w-full bg-card border-2 border-border rounded-xl p-4 text-left hover:border-primary transition-all duration-200" data-event="click:selectAnswer" data-answer-index="1">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 rounded-full bg-muted flex items-center justify-center">
                                <span class="font-medium text-muted-foreground">B</span>
                            </div>
                            <span class="font-medium text-foreground" data-bind="option.text">8</span>
                        </div>
                    </button>

                    <button class="quiz-option w-full bg-card border-2 border-border rounded-xl p-4 text-left hover:border-primary transition-all duration-200" data-event="click:selectAnswer" data-answer-index="2">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 rounded-full bg-muted flex items-center justify-center">
                                <span class="font-medium text-muted-foreground">C</span>
                            </div>
                            <span class="font-medium text-foreground" data-bind="option.text">4</span>
                        </div>
                    </button>
                </div>
                <!-- @END_MAP -->
            </div>

            <!-- Quiz Controls -->
            <div class="flex items-center justify-between">
                <button class="px-6 py-3 bg-muted text-muted-foreground rounded-xl font-medium hover:bg-border transition-colors" data-event="click:skipQuestion">
                    <i data-lucide="skip-forward" class="w-4 h-4 inline mr-2"></i>
                    <span data-bind="ui.skip">Skip</span>
                </button>
                
                <div class="flex items-center space-x-2 text-muted-foreground">
                    <i data-lucide="help-circle" class="w-4 h-4"></i>
                    <span class="text-sm" data-bind="ui.tapToSelect">Tap to select answer</span>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: QuizView -->

    </main>

    <!-- @COMPONENT: QuizResultsModal [score summary, next actions] -->
    <div id="quiz-results-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden" data-event="click:closeModal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-card rounded-3xl p-8 max-w-sm w-full mx-4 celebration" data-mock="true" onclick="event.stopPropagation()">
                <!-- Success Animation Area -->
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-success rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="check" class="w-10 h-10 text-success-foreground"></i>
                    </div>
                    <h3 class="text-2xl font-heading font-bold text-foreground mb-2" data-bind="ui.quizCompleted">Quiz Completed!</h3>
                    <p class="text-muted-foreground" data-bind="ui.greatJob">Great job on completing this quiz</p>
                </div>

                <!-- Score Summary -->
                <div class="bg-gradient-to-br from-primary/10 to-secondary/10 rounded-2xl p-6 mb-6">
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-primary font-heading" data-bind="quiz.score">4/5</div>
                            <div class="text-xs text-muted-foreground" data-bind="ui.correctAnswers">Correct</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-accent font-heading" data-bind="quiz.pointsEarned">+40</div>
                            <div class="text-xs text-muted-foreground" data-bind="ui.pointsEarned">Points</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-3">
                    <button class="w-full bg-primary text-primary-foreground py-4 rounded-xl font-semibold hover:opacity-90 transition-opacity" data-event="click:continueToNextTopic">
                        <i data-lucide="arrow-right" class="w-4 h-4 inline mr-2"></i>
                        <span data-bind="ui.continueNext">Continue to Next Topic</span>
                    </button>
                    
                    <div class="flex space-x-3">
                        <button class="flex-1 bg-muted text-muted-foreground py-3 rounded-xl font-medium hover:bg-border transition-colors" data-event="click:retakeQuiz">
                            <i data-lucide="refresh-cw" class="w-4 h-4 inline mr-2"></i>
                            <span data-bind="ui.retake">Retake</span>
                        </button>
                        <button class="flex-1 bg-secondary text-secondary-foreground py-3 rounded-xl font-medium hover:opacity-90 transition-opacity" data-event="click:backToDashboard">
                            <i data-lucide="home" class="w-4 h-4 inline mr-2"></i>
                            <span data-bind="ui.dashboard">Dashboard</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: QuizResultsModal -->

    <!-- @COMPONENT: OfflineIndicator [connection status display] -->
    <div id="offline-indicator" class="fixed bottom-4 left-4 right-4 max-w-sm mx-auto bg-muted text-muted-foreground px-4 py-2 rounded-lg text-sm text-center hidden z-40">
        <div class="flex items-center justify-center space-x-2">
            <i data-lucide="wifi-off" class="w-4 h-4"></i>
            <span data-bind="ui.offlineMode">You're in offline mode</span>
        </div>
    </div>
    <!-- @END_COMPONENT: OfflineIndicator -->

    <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // @STATE: currentView:string = 'dashboard'
    // @STATE: selectedLanguage:string = 'en'
    // @STATE: selectedSubject:object = null
    // @STATE: selectedTopic:object = null
    // @STATE: currentQuestionIndex:number = 0
    // @STATE: userProgress:object = {}

    // @FUNCTIONALITY: This application should implement offline-first architecture using Service Worker and IndexedDB
    (function() {
        'use strict';

        // Content Store - Sample STEM content structure
        // TODO: Load this from IndexedDB in production
        const content = {
            en: {
                ui: {
                    title: 'STEM Quest',
                    welcomeMessage: 'Welcome back, Explorer! 🚀',
                    welcomeSubtext: 'Continue your STEM journey and discover amazing concepts',
                    yourProgress: 'Your Progress',
                    totalPoints: 'Total Points',
                    quizzesCompleted: 'Quizzes Done',
                    dayStreak: 'Day Streak',
                    chooseSubject: 'Choose a Subject',
                    progress: 'Progress',
                    newAchievement: 'New Achievement!',
                    quizCompleted: 'Quiz Completed!',
                    greatJob: 'Great job on completing this quiz',
                    correctAnswers: 'Correct',
                    pointsEarned: 'Points',
                    continueNext: 'Continue to Next Topic',
                    retake: 'Retake',
                    dashboard: 'Dashboard',
                    skip: 'Skip',
                    tapToSelect: 'Tap to select answer',
                    offlineMode: "You're in offline mode"
                },
                subjects: [
                    {
                        id: 'math',
                        name: 'Mathematics',
                        description: 'Algebra, Geometry, and Number Theory',
                        icon: 'calculator',
                        color: 'purple',
                        topics: [
                            {
                                id: 'algebra-basics',
                                name: 'Algebra Basics',
                                description: 'Learn basic algebraic operations and equations',
                                questions: [
                                    {
                                        id: 'q1',
                                        text: 'What is the result of 2 + 2 × 2?',
                                        options: ['6', '8', '4'],
                                        correct: 0,
                                        points: 10
                                    },
                                    {
                                        id: 'q2', 
                                        text: 'Solve for x: x + 5 = 10',
                                        options: ['3', '5', '15'],
                                        correct: 1,
                                        points: 10
                                    }
                                ]
                            }
                        ]
                    }
                    // More subjects would be added here
                ]
            },
            hi: {
                // Hindi translations would go here
                ui: {
                    title: 'STEM Quest',
                    welcomeMessage: 'वापसी पर स्वागत है, खोजकर्ता! 🚀',
                    chooseSubject: 'एक विषय चुनें'
                    // More Hindi translations...
                }
            },
            te: {
                // Telugu translations would go here
                ui: {
                    title: 'STEM Quest',
                    welcomeMessage: 'తిరిగి స్వాగతం, అన్వేషకుడా! 🚀',
                    chooseSubject: 'ఒక విషయాన్ని ఎంచుకోండి'
                    // More Telugu translations...
                }
            }
        };

        // Application State
        let appState = {
            currentView: 'dashboard',
            selectedLanguage: 'en',
            selectedSubject: null,
            selectedTopic: null,
            currentQuestionIndex: 0,
            userProgress: {
                totalPoints: 245,
                completedQuizzes: 12,
                streak: 7,
                level: 3
            },
            quizState: {
                currentScore: 0,
                answers: []
            }
        };

        // View Management
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('[id$="-view"], [id$="-modal"]').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Show target view
            const targetView = document.getElementById(viewName);
            if (targetView) {
                targetView.classList.remove('hidden');
                targetView.classList.add('slide-in');
                appState.currentView = viewName.replace('-view', '').replace('-modal', '');
            }
        }

        // Language switching
        function switchLanguage(lang) {
            appState.selectedLanguage = lang;
            // TODO: Update all UI text based on selected language
            console.log(`Switched to language: ${lang}`);
        }

        // Subject selection
        function selectSubject(subjectId) {
            const currentContent = content[appState.selectedLanguage];
            appState.selectedSubject = currentContent.subjects.find(s => s.id === subjectId);
            showView('topics-view');
        }

        // Topic selection
        function selectTopic(topicId) {
            if (!appState.selectedSubject) return;
            
            appState.selectedTopic = appState.selectedSubject.topics.find(t => t.id === topicId);
            appState.currentQuestionIndex = 0;
            appState.quizState = { currentScore: 0, answers: [] };
            
            showView('quiz-view');
            loadCurrentQuestion();
        }

        // Quiz functionality
        function loadCurrentQuestion() {
            if (!appState.selectedTopic) return;
            
            const question = appState.selectedTopic.questions[appState.currentQuestionIndex];
            // TODO: Update quiz UI with current question data
            console.log('Loading question:', question);
        }

        function selectAnswer(answerIndex) {
            if (!appState.selectedTopic) return;
            
            const question = appState.selectedTopic.questions[appState.currentQuestionIndex];
            const isCorrect = answerIndex === question.correct;
            
            // Visual feedback
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === answerIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });

            // Update score
            if (isCorrect) {
                appState.quizState.currentScore += question.points;
            }

            // Continue to next question or show results
            setTimeout(() => {
                if (appState.currentQuestionIndex < appState.selectedTopic.questions.length - 1) {
                    appState.currentQuestionIndex++;
                    loadCurrentQuestion();
                    
                    // Reset option styles
                    options.forEach(option => {
                        option.classList.remove('correct', 'incorrect');
                        option.style.pointerEvents = 'auto';
                    });
                } else {
                    showQuizResults();
                }
            }, 1500);
        }

        function showQuizResults() {
            // TODO: Update user progress in IndexedDB
            // TODO: Show quiz results modal with final score
            appState.userProgress.totalPoints += appState.quizState.currentScore;
            appState.userProgress.completedQuizzes++;
            
            document.getElementById('quiz-results-modal').classList.remove('hidden');
        }

        // Navigation handlers
        function goBack() {
            if (appState.currentView === 'topics') {
                showView('dashboard-view');
            } else if (appState.currentView === 'quiz') {
                showView('topics-view');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize app
            console.log('STEM Quest initialized');
            
            // TODO: Initialize IndexedDB
            // TODO: Load content from IndexedDB
            // TODO: Register Service Worker
            
            // Language selector
            document.querySelector('select').addEventListener('change', function(e) {
                switchLanguage(e.target.value);
            });

            // Subject cards
            document.querySelectorAll('[data-subject-id]').forEach(card => {
                card.addEventListener('click', function() {
                    selectSubject(this.dataset.subjectId);
                });
            });

            // Topic cards  
            document.querySelectorAll('[data-topic-id]').forEach(card => {
                card.addEventListener('click', function() {
                    selectTopic(this.dataset.topicId);
                });
            });

            // Quiz options
            document.querySelectorAll('[data-answer-index]').forEach(option => {
                option.addEventListener('click', function() {
                    selectAnswer(parseInt(this.dataset.answerIndex));
                });
            });

            // Back buttons
            document.querySelectorAll('[data-event="click:goBack"]').forEach(btn => {
                btn.addEventListener('click', goBack);
            });

            // Modal close
            document.getElementById('quiz-results-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                    showView('dashboard-view');
                }
            });

            // Check online/offline status
            function updateOnlineStatus() {
                const indicator = document.getElementById('offline-indicator');
                if (navigator.onLine) {
                    indicator.classList.add('hidden');
                } else {
                    indicator.classList.remove('hidden');
                }
            }

            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            updateOnlineStatus();
        });

        // IndexedDB Module
        const Database = {
            dbName: 'STEMQuestDB',
            version: 1,
            
            // TODO: Initialize IndexedDB with object stores for:
            // - subjects: Store all STEM content
            // - progress: Store user quiz progress and scores  
            // - achievements: Store unlocked achievements
            // - settings: Store app preferences and language
            
            init() {
                // TODO: Implement IndexedDB initialization
                console.log('Database initialization placeholder');
            },
            
            saveProgress(data) {
                // TODO: Save quiz completion data with timestamp
                console.log('Save progress placeholder:', data);
            },
            
            loadContent() {
                // TODO: Load subjects and questions from IndexedDB
                console.log('Load content placeholder');
                return content;
            }
        };

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // TODO: Register service worker for offline caching
                console.log('Service Worker registration placeholder');
            });
        }

        // Export for debugging
        window.STEMQuest = {
            state: appState,
            content: content,
            db: Database
        };

    })();
    </script>

    <!-- Service Worker Implementation -->
    <!-- TODO: Implement service worker for caching assets and enabling offline functionality -->
    <script>
    // Service Worker Code (would typically be in separate sw.js file)
    const CACHE_NAME = 'stem-quest-v1';
    const ASSETS_TO_CACHE = [
        '/',
        '/index.html',
        'https://cdn.tailwindcss.com',
        'https://unpkg.com/lucide@latest/dist/umd/lucide.js',
        'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap'
    ];

    // TODO: Implement service worker install, fetch, and activate events
    // TODO: Use cache-first strategy for all assets
    // TODO: Handle offline scenarios gracefully
    </script>

</body>
</html>